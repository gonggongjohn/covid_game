<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhd.dao.CommentDao">
    <select id="addRequiredCommentary"
            parameterType="com.zhd.domain.Comment" >
        replace into comment_commentaries values
        <foreach collection="requiredCommentaries" item="c" separator=",">
            (#{commentId},#{c.cid})
        </foreach>
    </select>
    <select id="matchComment"
            parameterType="arraylist"
            resultType="com.zhd.domain.Comment">
        select * from `comment` where not exists (
            select * from comment_commentaries where cid not in (
                <foreach collection="list" item="c" separator=",">
                    #{c.cid}
                </foreach>
            ) and `comment`.comment_id = comment_commentaries.comment_id
        ) limit 0,1
    </select>
</mapper>